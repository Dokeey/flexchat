(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{151:function(e,t,a){e.exports=a.p+"static/media/flexchatlogo.ad21ba20.png"},163:function(e,t,a){e.exports=a(284)},216:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=a(40),i=a(32),s=a(53),u=a.n(s);function m(e,t){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}}function d(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(a){console.log(a)}}var p=Object(n.createContext)(),f=function(e,t){var a=t.type;if(a===v){var n=t.payload,r=t.pk,c=Object(i.a)(Object(i.a)({},e),{},{jwtToken:n,pk:r});return Object(s.UpdateWithSideEffect)(c,(function(e,t){d("jwtToken",n)}))}if(a===b){var l=Object(i.a)(Object(i.a)({},e),{},{jwtToken:""});return Object(s.UpdateWithSideEffect)(l,(function(e,t){d("jwtToken","")}))}if(a===g){var o=t.payload,u=Object(i.a)(Object(i.a)({},e),{},{group:o});return Object(s.Update)(u)}if(a===y){var m=Object(i.a)(Object(i.a)({},e),{},{group:""});return Object(s.Update)(m)}if(a===k){var p=t.payload,f=Object(i.a)(Object(i.a)({},e),{},{total_user:p});return Object(s.Update)(f)}if(a===j){var E=t.payload,h=Object(i.a)(Object(i.a)({},e),{},{is_match:E});return Object(s.Update)(h)}if(a===x){var O=t.payload,w=Object(i.a)(Object(i.a)({},e),{},{is_login:O});return Object(s.Update)(w)}return e},E=function(e){var t=e.children,a=m("jwtToken",""),n=u()(f,{jwtToken:a,pk:-1,group:"",total_user:"Loading...",is_match:!1,is_loing:!1}),c=Object(o.a)(n,2),l=c[0],i=c[1];return r.a.createElement(p.Provider,{value:{store:l,dispatch:i}},t)},h=function(){return Object(n.useContext)(p)},v="APP/SET_TOKEN",b="APP/DELETE_TOKEN",g="APP/SET_GROUP",y="APP/DELETE_GROUP",k="APP/SET_TOTALUSER",j="APP/SET_ISMATCH",x="APP/SET_ISLOGIN",O=function(){return{type:y}},w=function(e){return{type:k,payload:e}},S=function(e){return{type:j,payload:e}},N=function(e){return{type:x,payload:e}},T=a(105),_=a(33),A=a(50),C=a.n(A),P=a(66),I=a(161),z=a(289),U=a(294),B=a(295),L=a(76),R=a.n(L),W="https://dry-dawn-35150.herokuapp.com",J=R.a.create({baseURL:W});function G(e){var t=e.chatClose,a=e.setWaiters,n=h(),c=n.store,l=c.pk,o=c.jwtToken,i=c.is_match,s=n.dispatch,u={Authorization:"JWT ".concat(o)},m=function(){var e=Object(P.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),o){e.next=4;break}return s(N(!1)),e.abrupt("return",null);case 4:return s(S(!0)),e.prev=5,console.log(i),e.next=9,J.get("/chat/match/".concat(l,"/"),{headers:u});case 9:n=e.sent,s((c=n.data.group,{type:g,payload:c})),a(0),I.a.open({message:"\uc0c1\ub300\ubc29\uacfc \uc5f0\uacb0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",description:"\uc778\uc0ac\ub97c \uac74\ub124\ubcf4\uc138\uc694 :)",icon:r.a.createElement(U.a,{style:{color:"#43d5d2"}})}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}var c}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{type:"primary",shape:"round",onClick:m,size:"large",style:{border:"2px solid white"}},r.a.createElement(B.a,null),"\xa0\ucc44\ud305\uc2dc\uc791"))}var F=a(147),D=a.n(F),M=a(296),V=a(297),K=a(298),q=a(299),H=a(300),Q=a(301),X=a(291),Y=a(285);a(216);function Z(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){clearInterval(e)}}}),[e,t])}function $(e){var t=e.chatSocket,a=e.setChatSocket,c=h(),l=c.store,i=l.group,s=l.pk,u=l.jwtToken,m=l.is_match,d=c.dispatch,p=Object(n.useState)(""),f=Object(o.a)(p,2),E=f[0],v=f[1],b=Object(n.useState)(1),g=Object(o.a)(b,2),y=g[0],k=g[1],j=Object(n.useState)(0),x=Object(o.a)(j,2),N=x[0],T=x[1],_=Object(n.useRef)(null),A=Object(n.useState)([r.a.createElement("div",{key:"0",ref:_})]),C=Object(o.a)(A,2),P=C[0],z=C[1],U={Authorization:"JWT ".concat(u)};Z((function(){if(u&&m&&!i)try{var e=J.get("/chat/users_count/"),t=J.get("/chat/group/".concat(s,"/"),{headers:U});R.a.all([e,t]).then(R.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];console.log("response : ",e.data),console.log("response2 : ",t.data),d(w(e.data.count)),T(t.data.waiters_count)}))).catch((function(e){console.error(e)}))}catch(a){console.log(a)}}),5e3),t.onmessage=function(e){var t=JSON.parse(e.data);if(s===t.pk){var a=P.pop();P.push(r.a.createElement("div",{key:y,className:"bubble"},t.message)),P.push(a),z(P)}else{var n=P.pop();"M"===t.gender?P.push(r.a.createElement("div",{key:y,className:"another"},r.a.createElement("div",{className:"another-user"},r.a.createElement(X.a,{icon:r.a.createElement(M.a,null),style:{marginLeft:"10px",backgroundColor:"skyblue"}}),r.a.createElement("div",{className:"another-bubble"},t.message)))):P.push(r.a.createElement("div",{key:y,className:"another"},r.a.createElement("div",{className:"another-user"},r.a.createElement(X.a,{icon:r.a.createElement(V.a,null),style:{marginLeft:"10px",backgroundColor:"hotpink"}}),r.a.createElement("div",{className:"another-bubble"},t.message)))),P.push(n),z(P)}k((function(e){return e+1}))},t.onclose=function(e){z([r.a.createElement("div",{key:"0",ref:_})]),d(O()),a({}),d(S(!1)),I.a.open({message:"\ucc44\ud305\uc774 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",description:"\uc0c8\ub85c\uc6b4 \ucc44\ud305\uc744 \uc2dc\uc791\ud558\uc138\uc694",icon:r.a.createElement(K.a,{style:{color:"red"}})})};return Object(n.useEffect)((function(){_.current.scrollIntoView({behavior:"smooth"})}),[y]),r.a.createElement("div",{className:"chat-content"},r.a.createElement("div",{className:"chat-log-window"},m?i?P:r.a.createElement("div",{className:"flex-center"},r.a.createElement(Y.a,{size:"large",tip:N?r.a.createElement("div",null,"\ub0b4 \uc55e\uc758 \ub300\uae30\uc790 \uc218 : ",N):r.a.createElement("span",null,"\uc7a0\uc2dc\ud6c4 \ub9e4\uce6d\ub429\ub2c8\ub2e4!"),style:{color:"white"},indicator:r.a.createElement(q.a,{style:{fontSize:36},spin:!0})})):r.a.createElement("div",{className:"flex-center"},r.a.createElement(G,{chatClose:function(){if(!t.close)return null;t.close()},setWaiters:T}),P)),r.a.createElement("div",null,r.a.createElement(D.a,{placeholder:i?"\uba54\uc138\uc9c0\ub97c \ubcf4\ub0b4\uc138\uc694!":"\ucc44\ud305\uc2dc\uc791 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694!",enterButton:r.a.createElement(H.a,null),prefix:r.a.createElement(Q.a,null),size:"large",value:E,disabled:!i,allowClear:!0,maxLength:"100",onChange:function(e){return v(e.target.value)},onSearch:function(){if(!E)return null;t.send(JSON.stringify({message:E})),v("")}})))}var ee=a(287);function te(){var e=h(),t=e.store.total_user,a=e.dispatch;return Z(function(){var e=Object(P.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.get("/chat/users_count/");case 3:t=e.sent,a(w(t.data.count)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),5e3),r.a.createElement(ee.a,{hoverable:!0,title:r.a.createElement("div",{style:{textAlign:"center",wordBreak:"break-all"}},"\uc9c0\uae08 \uba87\uba85?"),bordered:!0},r.a.createElement("h1",{style:{textAlign:"center",color:"#43d5d2"}},t))}a(268);var ae=a(151),ne=a.n(ae);function re(e){var t=e.children,a=e.right_sidebar,n=e.user_info,c=e.footer;return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:ne.a,alt:"Flex Chat"})),r.a.createElement("div",{className:"topnav"},n)),r.a.createElement("div",{className:"contents"},t),r.a.createElement("div",{className:"left-sidebar"}),r.a.createElement("div",{className:"right-sidebar"},a),r.a.createElement("div",{className:"footer"},c))}var ce=a(302);function le(e){var t=e.chatSocket,a=h().store.group;return r.a.createElement("div",null,a?r.a.createElement(z.a,{type:"danger",danger:!0,block:!0,shape:"round",icon:r.a.createElement(ce.a,null),size:"large",onClick:function(){if(!t.close)return null;t.close()},style:{marginTop:"10px"}},"\ucc44\ud305 \uadf8\ub9cc\ud558\uae30"):null)}var oe=a(292),ie=a(290),se=a(303),ue=a(304),me=a(305),de=a(306);function pe(e){e.signal;var t=h(),a=t.store,c=a.jwtToken,l=a.is_login,s=t.dispatch,u=Object(n.useState)({gender:"",want_match:""}),m=Object(o.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(o.a)(f,2),b=E[0],g=E[1],y=Object(n.useState)(!1),k=Object(o.a)(y,2),j=k[0],x=k[1],O=function(){var e=Object(P.a)(C.a.mark((function e(){var t,a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x(!0),!d.pk){e.next=13;break}return s(S(!1)),t={Authorization:"JWT ".concat(c)},e.next=7,J.put("/accounts/users/".concat(d.pk,"/"),Object(i.a)({},d),{headers:t});case 7:a=e.sent,p(a.data),x(!1),T(),e.next=21;break;case 13:return e.next=15,J.post("/accounts/users/",Object(i.a)({},d));case 15:n=e.sent,p(n.data),s((l=n.data.token,o=n.data.pk,{type:v,payload:l,pk:o})),x(!1),T(),s(N(!0));case 21:I.a.open({message:"\uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",description:"\uc774\uc81c \ucc44\ud305\uc744 \uc2dc\uc791\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!",icon:r.a.createElement(se.a,{style:{color:"green"}})}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:case"end":return e.stop()}var l,o}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}(),w=function(){g(!0)},T=function(){g(!1)};return Object(n.useEffect)((function(){l||(w(),s(N(!0)))}),[l,s]),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,c?r.a.createElement(ue.a,{onClick:w,style:{fontSize:"40px",color:"#43d5d2"}}):r.a.createElement(me.a,{onClick:w,style:{fontSize:"40px",color:"#43d5d2"}}),r.a.createElement(oe.a,{maskStyle:{backgroundColor:"transparent"},placement:"left",closable:!0,onClose:T,visible:b,style:{boxShadow:"0 8px 16px 0 rgba(0, 0, 0, 1)"}},r.a.createElement("div",null,r.a.createElement("p",{style:{marginBottom:24,textAlign:"center"}},r.a.createElement(me.a,null),"\xa0SETTING"),r.a.createElement("hr",{style:fe}),r.a.createElement("div",{style:{marginTop:"30px",fontWeight:"bold",fontSize:"20px",color:"skyblue"}},"\uc800\ub294"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ie.a.Group,{onChange:function(e){return p((function(t){return Object(i.a)(Object(i.a)({},t),{},{gender:e.target.value})}))},buttonStyle:"solid",size:"large",style:{margin:"10px 0 10px 0",borderRadius:"12px"}},r.a.createElement(ie.a.Button,{style:Ee,value:"M"},r.a.createElement(M.a,null),"\xa0\ub0a8\uc790"),r.a.createElement(ie.a.Button,{style:Ee,value:"F"},r.a.createElement(V.a,null),"\xa0\uc5ec\uc790"))),r.a.createElement("div",{style:{textAlign:"right",marginBottom:"30px"}},"\uc785\ub2c8\ub2e4."),r.a.createElement("hr",{style:fe}),r.a.createElement("div",{style:{marginTop:"30px",fontWeight:"bold",fontSize:"20px",color:"hotpink"}},"\uc0c1\ub300\ubc29\uc740 \xa0"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ie.a.Group,{onChange:function(e){return p((function(t){return Object(i.a)(Object(i.a)({},t),{},{want_match:e.target.value})}))},buttonStyle:"solid",style:{margin:"10px 0 10px 0",borderRadius:"12px"},size:"large"},r.a.createElement(ie.a.Button,{style:Ee,value:"M"},r.a.createElement(M.a,null),"\xa0\ub0a8\uc790"),r.a.createElement(ie.a.Button,{style:Ee,value:"F"},r.a.createElement(V.a,null),"\xa0\uc5ec\uc790"),r.a.createElement(ie.a.Button,{style:Ee,value:"A"},r.a.createElement(de.a,null),"\xa0\uc544\ubb34\ub098"))),r.a.createElement("div",{style:{textAlign:"right",marginBottom:"30px"}},"\uac00 \uc88b\uaca0\uc5b4\uc694."),r.a.createElement("hr",{style:fe}),r.a.createElement("div",{style:{textAlign:"center",marginTop:"30px"}},r.a.createElement(z.a,{style:{borderRadius:"8px",boxShadow:"0 2px 4px 0 gray"},block:!0,type:"primary",loading:j,disabled:!d.gender||!d.want_match,size:"large",onClick:O},"\uc800\uc7a5"))))))}var fe={borderTop:"1px solid #eaeaea"},Ee={borderRadius:"8px",border:"2px solid #43d5d2",margin:"3px 3px 0 3px",boxShadow:"0 2px 3px 0 gray"},he=a(288),ve=a(286),be=a(293),ge=a(307),ye=a(308),ke=a(309),je=a(310),xe=a(311),Oe=(a(269),function(){var e=he.a.Link;return r.a.createElement("div",{className:"footer-contents"},r.a.createElement("div",{className:"footer-content"},r.a.createElement(ve.a,null,r.a.createElement(ge.a,null),"\xa0Project"),r.a.createElement(be.a,null,r.a.createElement(be.a.Item,{dot:r.a.createElement(ye.a,{className:"timeline-clock-icon",style:{color:"dimgray"}})},r.a.createElement(e,{href:"https://github.com/dokeey/flexchat"},"https://github.com/dokeey/flexchat")),r.a.createElement(be.a.Item,{dot:r.a.createElement(ke.a,{className:"timeline-clock-icon"}),color:"red"},"\uce5c\uad6c \ubabb \uc0ac\uadc0\uc5b4\ub3c4 \ucc45\uc784 \uc548\uc9d0"))),r.a.createElement("div",{className:"footer-content"},r.a.createElement(ve.a,null,r.a.createElement(je.a,null),"\xa0\uac1c\ubc1c\uc7901"),r.a.createElement(be.a,null,r.a.createElement(be.a.Item,{dot:r.a.createElement(xe.a,{className:"timeline-clock-icon",style:{color:"skyblue"}})},r.a.createElement(e,{href:"mailto:ehdngv@naver.com"},"ehdngv@naver.com")),r.a.createElement(be.a.Item,{dot:r.a.createElement(ye.a,{className:"timeline-clock-icon",style:{color:"dimgray"}})},r.a.createElement(e,{href:"https://github.com/Dokeey/"},"https://github.com/Dokeey")),r.a.createElement(be.a.Item,{dot:r.a.createElement(ke.a,{className:"timeline-clock-icon"}),color:"red"},"\uc0bc\uacb9\uc0b4\uc744 \uc88b\uc544\ud568"))),r.a.createElement("div",{className:"footer-content"},r.a.createElement(ve.a,null,r.a.createElement(je.a,null),"\xa0\uac1c\ubc1c\uc7902"),r.a.createElement(be.a,null,r.a.createElement(be.a.Item,{dot:r.a.createElement(xe.a,{className:"timeline-clock-icon",style:{color:"skyblue"}})},r.a.createElement(e,{href:"mailto:thflthdi@naver.com"},"thflthdi@naver.com")),r.a.createElement(be.a.Item,{dot:r.a.createElement(ye.a,{className:"timeline-clock-icon",style:{color:"dimgray"}})},r.a.createElement(e,{href:"https://github.com/thflthdi/"},"https://github.com/thflthdi")),r.a.createElement(be.a.Item,{dot:r.a.createElement(ke.a,{className:"timeline-clock-icon"}),color:"red"},"\uac15\uc544\uc9c0\ub97c \ud0a4\uc6c0"))))});var we=function(){var e=h().store,t=e.jwtToken,a=e.group,c=Object(n.useState)({}),l=Object(o.a)(c,2),i=l[0],s=l[1];Object(n.useEffect)((function(){if(t&&a){var e=new WebSocket("wss://dry-dawn-35150.herokuapp.com/ws/chat/?token=".concat(t));s(e)}}),[t,a]);var u=r.a.createElement(r.a.Fragment,null,r.a.createElement(te,null),r.a.createElement(le,{chatSocket:i}));return r.a.createElement("div",null,r.a.createElement(re,{right_sidebar:u,user_info:r.a.createElement(pe,null),footer:r.a.createElement(Oe,null)},r.a.createElement($,{chatSocket:i,setChatSocket:s})))},Se=a(56),Ne=a.n(Se),Te=a(160),_e=function(e){return function(e){void 0===e&&(e=function(){});var t=Object(Te.a)(e);Object(n.useEffect)((function(){var e=function(e){var a=t.current(e);if(e.defaultPrevented&&(e.returnValue=""),"string"===typeof a)return e.returnValue=a,a};return window.addEventListener("unload",e),function(){window.removeEventListener("unload",e)}}),[t])}(e.onUnload),e.children};_e.defaultProps={children:null},_e.propTypes={children:Ne.a.any,onUnload:Ne.a.func.isRequired};var Ae=function(){var e=h(),t=e.store.pk,a=e.dispatch,n=function(){a({type:b}),a(O());try{navigator.sendBeacon("".concat("https://dry-dawn-35150.herokuapp.com","/accounts/delete/").concat(t,"/"))}catch(e){console.error(e)}};return r.a.createElement(_e,{onUnload:function(){return n()}},r.a.createElement(_.a,{path:"/",component:we}))};a(282),a(283);l.a.render(r.a.createElement(T.a,{basename:""},r.a.createElement(E,null,r.a.createElement(Ae,null))),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.b109dea5.chunk.js.map