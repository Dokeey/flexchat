{"version":3,"sources":["assets/flexchatlogo.png","utils/useLocalStorage.js","store.js","Constants.js","api.js","components/chatStart.js","components/chat.js","components/userCount.js","components/appLayout.js","components/chatStop.js","components/userInfo.js","components/footer.js","pages/home.js","utils/Unload.js","pages/index.js","index.js"],"names":["module","exports","getStorageItem","key","initialValue","item","window","localStorage","getItem","JSON","parse","error","console","setStorageItem","value","setItem","stringify","AppContext","createContext","reducer","prevState","action","type","SET_TOKEN","jwtToken","payload","pk","newState","UpdateWithSideEffect","state","dispatch","DELETE_TOKEN","SET_GROUP","group","Update","DELETE_GROUP","SET_TOTALUSER","total_user","SET_ISMATCH","is_match","SET_ISLOGIN","is_login","SET_USERSOCKET","userSocket","SET_WAITERSOCKET","waiterSocket","AppProvider","children","useReducerWithSideEffects","is_loing","store","Provider","useAppContext","useContext","deleteGroup","setIsMatch","setIsLogin","setUserSocket","setWaiterSocket","API_HOST","process","SOCKET_HOST","axiosInstance","Axios","create","baseURL","ChatStart","chatClose","setWaiters","headers","Authorization","startMatching","a","send","get","response","data","ws","WebSocket","onmessage","e","waiters_count","shape","onClick","size","style","border","CommentOutlined","Chat","chatSocket","setChatSocket","useState","message","setMessage","setKey","waiters","messagesEndRef","useRef","chatlog","setChatlog","push","className","gender","icon","ManOutlined","marginLeft","backgroundColor","WomanOutlined","prevValue","onclose","ref","notification","open","description","CloseCircleOutlined","color","useEffect","document","querySelector","scrollTop","scrollHeight","tip","indicator","LoadingOutlined","fontSize","spin","close","placeholder","enterButton","SendOutlined","prefix","MessageTwoTone","disabled","allowClear","maxLength","onChange","target","onSearch","UserCount","set_group_total_user","setTotalUser","user_count","hoverable","title","textAlign","wordBreak","bordered","AppLayout","right_sidebar","user_info","footer","src","Logo","alt","ChatStop","danger","block","StopOutlined","marginTop","UserInfo","signal","want_match","userInfo","setUserInfo","visible","setVisible","loading","setLoading","userSubmit","put","onDrawerClose","post","token","CheckCircleOutlined","showDrawer","SettingFilled","SettingOutlined","maskStyle","placement","closable","onClose","boxShadow","marginBottom","h1","fontWeight","Group","prev","buttonStyle","margin","borderRadius","Button","Radio_Button","TeamOutlined","borderTop","Footer","Link","Typography","ProjectOutlined","Item","dot","GithubOutlined","href","InfoCircleOutlined","UserOutlined","MailOutlined","Home","SmileOutlined","Unload","props","handler","handlerRef","useLatest","handleUnload","event","returnValue","current","defaultPrevented","addEventListener","removeEventListener","useUnload","onUnload","defaultProps","propTypes","PropTypes","any","func","isRequired","Root","userDelete","navigator","sendBeacon","path","component","ReactDOM","render","basename","getElementById"],"mappings":"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","file":"static/js/main.7b0a5358.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/flexchatlogo.ad21ba20.png\";","import { useState } from \"react\";\n\nexport function getStorageItem(key, initialValue) {\n  try {\n    // Get from local storage by key\n    const item = window.localStorage.getItem(key);\n    // Parse stored json or if none return initialValue\n    return item ? JSON.parse(item) : initialValue;\n  } catch (error) {\n    // If error also return initialValue\n    console.error(error);\n    return initialValue;\n  }\n}\nexport function setStorageItem(key, value) {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n// Hook\nexport default function useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    return getStorageItem(key, initialValue);\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    // Allow value to be a function so we have same API as useState\n    const valueToStore = value instanceof Function ? value(storedValue) : value;\n    // Save state\n    setStoredValue(valueToStore);\n    setStorageItem(key, valueToStore);\n  };\n\n  return [storedValue, setValue];\n}\n","import React, { createContext, useContext } from \"react\";\nimport useReducerWithSideEffects, {\n  UpdateWithSideEffect,\n  Update,\n} from \"use-reducer-with-side-effects\";\nimport { getStorageItem, setStorageItem } from \"utils/useLocalStorage\";\n\nconst AppContext = createContext();\n\nconst reducer = (prevState, action) => {\n  const { type } = action;\n  if (type === SET_TOKEN) {\n    const { payload: jwtToken, pk } = action;\n    const newState = { ...prevState, jwtToken, pk };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", jwtToken);\n    });\n  } else if (type === DELETE_TOKEN) {\n    const newState = { ...prevState, jwtToken: \"\" };\n    return UpdateWithSideEffect(newState, (state, dispatch) => {\n      setStorageItem(\"jwtToken\", \"\");\n    });\n  } else if (type === SET_GROUP) {\n    const { payload: group } = action;\n    const newState = { ...prevState, group };\n    return Update(newState);\n  } else if (type === DELETE_GROUP) {\n    const newState = { ...prevState, group: \"\" };\n    return Update(newState);\n  } else if (type === SET_TOTALUSER) {\n    const { payload: total_user } = action;\n    const newState = { ...prevState, total_user };\n    return Update(newState);\n  } else if (type === SET_ISMATCH) {\n    const { payload: is_match } = action;\n    const newState = { ...prevState, is_match };\n    return Update(newState);\n  } else if (type === SET_ISLOGIN) {\n    const { payload: is_login } = action;\n    const newState = { ...prevState, is_login };\n    return Update(newState);\n  } else if (type === SET_USERSOCKET) {\n    const { payload: userSocket } = action;\n    const newState = { ...prevState, userSocket };\n    return Update(newState);\n  } else if (type === SET_WAITERSOCKET) {\n    const { payload: waiterSocket } = action;\n    const newState = { ...prevState, waiterSocket };\n    return Update(newState);\n  }\n\n  return prevState;\n};\n\nexport const AppProvider = ({ children }) => {\n  const jwtToken = getStorageItem(\"jwtToken\", \"\");\n  const [store, dispatch] = useReducerWithSideEffects(reducer, {\n    jwtToken,\n    pk: -1,\n    group: \"\",\n    total_user: \"Loading...\",\n    is_match: false,\n    is_loing: false,\n    userSocket: \"\",\n    waiterSocket: \"\",\n  });\n  return (\n    <AppContext.Provider value={{ store, dispatch }}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport const useAppContext = () => useContext(AppContext);\n\n// Actions\nconst SET_TOKEN = \"APP/SET_TOKEN\";\nconst DELETE_TOKEN = \"APP/DELETE_TOKEN\";\nconst SET_GROUP = \"APP/SET_GROUP\";\nconst DELETE_GROUP = \"APP/DELETE_GROUP\";\nconst SET_TOTALUSER = \"APP/SET_TOTALUSER\";\nconst SET_ISMATCH = \"APP/SET_ISMATCH\";\nconst SET_ISLOGIN = \"APP/SET_ISLOGIN\";\nconst SET_USERSOCKET = \"APP/SET_USERSOCKET\";\nconst SET_WAITERSOCKET = \"APP/SET_WAITERSOCKET\";\n\n// Action Creators\nexport const setToken = (token, pk) => ({\n  type: SET_TOKEN,\n  payload: token,\n  pk,\n});\nexport const deleteToken = () => ({ type: DELETE_TOKEN });\n\nexport const setGroup = (group) => ({\n  type: SET_GROUP,\n  payload: group,\n});\n\nexport const deleteGroup = () => ({ type: DELETE_GROUP });\n\nexport const setTotalUser = (total_user) => ({\n  type: SET_TOTALUSER,\n  payload: total_user,\n});\n\nexport const setIsMatch = (is_match) => ({\n  type: SET_ISMATCH,\n  payload: is_match,\n});\n\nexport const setIsLogin = (is_loing) => ({\n  type: SET_ISLOGIN,\n  payload: is_loing,\n});\n\nexport const setUserSocket = (userSocket) => ({\n  type: SET_USERSOCKET,\n  payload: userSocket,\n});\n\nexport const setWaiterSocket = (waiterSocket) => ({\n  type: SET_WAITERSOCKET,\n  payload: waiterSocket,\n});\n","export const API_HOST = process.env.REACT_APP_API_HOST || \"http://localhost\";\nexport const SOCKET_HOST = \"wss://dry-dawn-35150.herokuapp.com\";\n// export const API_HOST = \"http://localhost\";\n// export const SOCKET_HOST = \"ws://localhost\";\n","import Axios from \"axios\";\nimport { API_HOST } from \"Constants\";\n\nexport const axiosInstance = Axios.create({\n  baseURL: API_HOST,\n});\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { useAppContext } from \"store\";\nimport { setIsLogin } from \"store\";\nimport { CommentOutlined } from \"@ant-design/icons\";\nimport { setIsMatch } from \"store\";\nimport { axiosInstance } from \"api\";\nimport { SOCKET_HOST } from \"Constants\";\nimport { setWaiterSocket } from \"store\";\n\nexport function ChatStart({ chatClose, setWaiters }) {\n  const {\n    store: { pk, jwtToken, userSocket, waiterSocket },\n    dispatch,\n  } = useAppContext();\n  const headers = { Authorization: `JWT ${jwtToken}` };\n\n  const startMatching = async () => {\n    chatClose();\n    if (!jwtToken) {\n      dispatch(setIsLogin(false));\n      return null;\n    }\n    dispatch(setIsMatch(true));\n    if (waiterSocket) {\n      waiterSocket.send(JSON.stringify({}));\n    }\n    try {\n      const response = await axiosInstance.get(`/chat/match/${pk}/`, {\n        headers,\n      });\n      if (response.data.group) {\n        userSocket.send(\n          JSON.stringify({\n            group: response.data.group,\n          })\n        );\n      } else {\n        const ws = new WebSocket(SOCKET_HOST + `/ws/waiter/?token=${jwtToken}`);\n        ws.onmessage = (e) => {\n          const data = JSON.parse(e.data);\n          setWaiters(data.waiters_count);\n        };\n        dispatch(setWaiterSocket(ws));\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div>\n      <Button\n        type=\"primary\"\n        shape=\"round\"\n        onClick={startMatching}\n        size=\"large\"\n        style={{ border: \"2px solid white\" }}\n      >\n        <CommentOutlined />\n        &nbsp;채팅시작\n      </Button>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useAppContext, deleteGroup, setIsMatch } from \"store\";\nimport { ChatStart } from \"./chatStart\";\nimport Search from \"antd/lib/input/Search\";\nimport {\n  SendOutlined,\n  MessageTwoTone,\n  WomanOutlined,\n  ManOutlined,\n  LoadingOutlined,\n  CloseCircleOutlined,\n} from \"@ant-design/icons\";\nimport { Avatar, Spin, notification } from \"antd\";\nimport \"./chat.scss\";\n\nexport function Chat({ chatSocket, setChatSocket }) {\n  const {\n    store: { group, pk, is_match, waiterSocket },\n    dispatch,\n  } = useAppContext();\n  const [message, setMessage] = useState(\"\");\n  const [key, setKey] = useState(0);\n  const [waiters, setWaiters] = useState(0);\n  const messagesEndRef = useRef(null);\n  const [chatlog, setChatlog] = useState([]);\n\n  if (waiterSocket) {\n    waiterSocket.onmessage = (e) => {\n      const data = JSON.parse(e.data);\n      setWaiters(data.waiters_count);\n    };\n  }\n\n  chatSocket.onmessage = function (e) {\n    const data = JSON.parse(e.data);\n    if (pk === data.pk) {\n      chatlog.push(\n        <div key={key} className=\"bubble\">\n          {data.message}\n        </div>\n      );\n      setChatlog(chatlog);\n    } else {\n      if (data.gender === \"M\") {\n        chatlog.push(\n          <div key={key} className=\"another\">\n            <div className=\"another-user\">\n              <Avatar\n                icon={<ManOutlined />}\n                style={{ marginLeft: \"10px\", backgroundColor: \"skyblue\" }}\n              />\n              <div className=\"another-bubble\">{data.message}</div>\n            </div>\n          </div>\n        );\n      } else {\n        chatlog.push(\n          <div key={key} className=\"another\">\n            <div className=\"another-user\">\n              <Avatar\n                icon={<WomanOutlined />}\n                style={{ marginLeft: \"10px\", backgroundColor: \"hotpink\" }}\n              />\n              <div className=\"another-bubble\">{data.message}</div>\n            </div>\n          </div>\n        );\n      }\n      setChatlog(chatlog);\n    }\n    setKey((prevValue) => prevValue + 1);\n  };\n\n  chatSocket.onclose = function (e) {\n    setChatlog([<div key=\"0\" ref={messagesEndRef}></div>]);\n    dispatch(deleteGroup());\n    setChatSocket({});\n    dispatch(setIsMatch(false));\n    // console.error(e, \"클로즈 됐습니다.\");\n    notification.open({\n      message: \"채팅이 종료되었습니다.\",\n      description: \"새로운 채팅을 시작하세요\",\n      icon: <CloseCircleOutlined style={{ color: \"red\" }} />,\n    });\n  };\n\n  const chatclose = () => {\n    if (chatSocket.close) {\n      chatSocket.close();\n    } else {\n      return null;\n    }\n  };\n\n  const chat_submit = () => {\n    if (!message) {\n      return null;\n    }\n    chatSocket.send(\n      JSON.stringify({\n        message,\n      })\n    );\n    setMessage(\"\");\n  };\n\n  // const [maxHeight, setMaxHeight] = useState(\"100vh\");\n\n  // useEffect(() => {\n  //   setMaxHeight(document.querySelector(\"#chat_log_window\").offsetHeight);\n  // }, [maxHeight]);\n\n  // const useHeight = () => {\n  //   const [height, setHeight] = useState(maxHeight);\n\n  //   useEffect(() => {\n  //     const onResize = () =>\n  //       setHeight(document.querySelector(\"#chat_log_window\").offsetHeight);\n  //     window.addEventListener(\"resize\", onResize);\n  //     return () => window.removeEventListener(\"resize\", onResize);\n  //   }, []);\n\n  //   return height;\n  // };\n  // const height = useHeight();\n\n  useEffect(() => {\n    document.querySelector(\n      \".chat-log-window\"\n    ).scrollTop = document.querySelector(\".chat-log-window\").scrollHeight;\n  }, [key]);\n\n  return (\n    <div className=\"chat-content\">\n      <div className=\"chat-log-window\">\n        {!is_match ? (\n          <div className=\"flex-center\">\n            <ChatStart chatClose={chatclose} setWaiters={setWaiters} />\n          </div>\n        ) : !group ? (\n          <div className=\"flex-center\">\n            <Spin\n              size=\"large\"\n              tip={\n                waiters ? (\n                  <div>내 앞의 대기자 수 : {waiters}</div>\n                ) : (\n                  <span>잠시후 매칭됩니다!</span>\n                )\n              }\n              style={{ color: \"white\" }}\n              indicator={<LoadingOutlined style={{ fontSize: 36 }} spin />}\n            />\n          </div>\n        ) : (\n          chatlog\n        )}\n      </div>\n      <div>\n        <Search\n          placeholder={\n            group ? \"메세지를 보내세요!\" : \"채팅시작 버튼을 클릭하세요!\"\n          }\n          enterButton={<SendOutlined />}\n          prefix={<MessageTwoTone />}\n          size=\"large\"\n          value={message}\n          disabled={!group}\n          allowClear={true}\n          maxLength=\"100\"\n          onChange={(e) => setMessage(e.target.value)}\n          onSearch={chat_submit}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { useAppContext, setTotalUser, setGroup, setUserSocket } from \"store\";\nimport { Card } from \"antd\";\nimport { SOCKET_HOST } from \"Constants\";\n\nexport function UserCount() {\n  const {\n    store: { total_user, userSocket },\n    dispatch,\n  } = useAppContext();\n\n  const set_group_total_user = (e) => {\n    const data = JSON.parse(e.data);\n    dispatch(setTotalUser(data.user_count));\n    dispatch(setGroup(data.group));\n  };\n\n  useEffect(() => {\n    const ws = new WebSocket(SOCKET_HOST + `/ws/users/`);\n    ws.onmessage = (e) => {\n      set_group_total_user(e);\n    };\n    dispatch(setUserSocket(ws));\n  }, []);\n\n  if (userSocket) {\n    userSocket.onmessage = (e) => {\n      set_group_total_user(e);\n    };\n  }\n\n  return (\n    <Card\n      hoverable={true}\n      title={\n        <div\n          style={{\n            textAlign: \"center\",\n            wordBreak: \"break-all\",\n          }}\n        >\n          지금 몇명?\n        </div>\n      }\n      bordered={true}\n    >\n      <h1 style={{ textAlign: \"center\", color: \"#43d5d2\" }}>{total_user}</h1>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport \"./appLayout.scss\";\nimport Logo from \"assets/flexchatlogo.png\";\n\nexport function AppLayout({ children, right_sidebar, user_info, footer }) {\n  return (\n    <div className=\"app\">\n      <div className=\"header\">\n        <div className=\"logo\">\n          <img src={Logo} alt=\"Flex Chat\" />\n        </div>\n        <div className=\"topnav\">{user_info}</div>\n      </div>\n      <div className=\"contents\">{children}</div>\n      <div className=\"left-sidebar\"></div>\n      <div className=\"right-sidebar\">{right_sidebar}</div>\n      <div className=\"footer\">{footer}</div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { StopOutlined } from \"@ant-design/icons\";\nimport { useAppContext } from \"store\";\n\nexport function ChatStop({ chatSocket }) {\n  const {\n    store: { group },\n  } = useAppContext();\n  const chatClose = () => {\n    if (chatSocket.close) {\n      chatSocket.close();\n    } else {\n      return null;\n    }\n  };\n  return (\n    <div>\n      {group ? (\n        <Button\n          type=\"danger\"\n          danger\n          block\n          shape=\"round\"\n          icon={<StopOutlined />}\n          size=\"large\"\n          onClick={chatClose}\n          style={{ marginTop: \"10px\" }}\n        >\n          채팅 그만하기\n        </Button>\n      ) : null}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Radio, Drawer, Button, notification } from \"antd\";\nimport { useAppContext } from \"store\";\nimport { setToken } from \"store\";\nimport {\n  SettingFilled,\n  ManOutlined,\n  WomanOutlined,\n  TeamOutlined,\n  SettingOutlined,\n  CheckCircleOutlined,\n} from \"@ant-design/icons\";\nimport { setIsMatch } from \"store\";\nimport { setIsLogin } from \"store\";\nimport { axiosInstance } from \"api\";\nimport { setUserSocket } from \"store\";\nimport { SOCKET_HOST } from \"Constants\";\n\nexport function UserInfo({ signal }) {\n  const {\n    store: { jwtToken, is_login, userSocket },\n    dispatch,\n  } = useAppContext();\n  const [userInfo, setUserInfo] = useState({ gender: \"\", want_match: \"\" });\n  const [visible, setVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const userSubmit = async () => {\n    try {\n      setLoading(true);\n      if (userInfo.pk) {\n        dispatch(setIsMatch(false));\n        const headers = { Authorization: `JWT ${jwtToken}` };\n        const response = await axiosInstance.put(\n          `/accounts/users/${userInfo.pk}/`,\n          { ...userInfo },\n          { headers }\n        );\n        setUserInfo(response.data);\n        setLoading(false);\n        onDrawerClose();\n      } else {\n        const response = await axiosInstance.post(\"/accounts/users/\", {\n          ...userInfo,\n        });\n        setUserInfo(response.data);\n        dispatch(setToken(response.data.token, response.data.pk));\n        setLoading(false);\n        onDrawerClose();\n        dispatch(setIsLogin(true));\n        userSocket.send(JSON.stringify({}));\n        userSocket.close(4000);\n        const ws = new WebSocket(\n          SOCKET_HOST + `/ws/users/?token=${response.data.token}`\n        );\n        dispatch(setUserSocket(ws));\n      }\n\n      notification.open({\n        message: \"성공적으로 저장되었습니다.\",\n        description: \"이제 채팅을 시작할 수 있습니다!\",\n        icon: <CheckCircleOutlined style={{ color: \"green\" }} />,\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const showDrawer = () => {\n    setVisible(true);\n  };\n\n  const onDrawerClose = () => {\n    setVisible(false);\n  };\n\n  useEffect(() => {\n    if (!is_login) {\n      showDrawer();\n      dispatch(setIsLogin(true));\n    }\n  }, [is_login, dispatch]);\n\n  return (\n    <div>\n      <>\n        {jwtToken ? (\n          <SettingFilled\n            onClick={showDrawer}\n            style={{\n              fontSize: \"40px\",\n              color: \"#43d5d2\",\n            }}\n          />\n        ) : (\n          <SettingOutlined\n            onClick={showDrawer}\n            style={{\n              fontSize: \"40px\",\n              color: \"#43d5d2\",\n            }}\n          />\n        )}\n        <Drawer\n          //   mask={false}\n          maskStyle={{\n            backgroundColor: \"transparent\",\n          }}\n          //   title=\"SETTING\"\n          placement=\"left\"\n          closable={true}\n          onClose={onDrawerClose}\n          visible={visible}\n          style={{\n            boxShadow: \"0 8px 16px 0 rgba(0, 0, 0, 1)\",\n          }}\n        >\n          <div>\n            <p style={{ marginBottom: 24, textAlign: \"center\" }}>\n              <SettingOutlined />\n              &nbsp;SETTING\n            </p>\n            <hr style={h1} />\n            <div\n              style={{\n                marginTop: \"30px\",\n                fontWeight: \"bold\",\n                fontSize: \"20px\",\n                color: \"skyblue\",\n              }}\n            >\n              저는\n            </div>\n            <div style={{ textAlign: \"center\" }}>\n              <Radio.Group\n                onChange={(e) =>\n                  setUserInfo((prev) => ({ ...prev, gender: e.target.value }))\n                }\n                buttonStyle=\"solid\"\n                size=\"large\"\n                style={{\n                  margin: \"10px 0 10px 0\",\n                  borderRadius: \"12px\",\n                }}\n              >\n                <Radio.Button style={Radio_Button} value=\"M\">\n                  <ManOutlined />\n                  &nbsp;남자\n                </Radio.Button>\n                <Radio.Button style={Radio_Button} value=\"F\">\n                  <WomanOutlined />\n                  &nbsp;여자\n                </Radio.Button>\n              </Radio.Group>\n            </div>\n            <div style={{ textAlign: \"right\", marginBottom: \"30px\" }}>\n              입니다.\n            </div>\n            <hr style={h1} />\n            <div\n              style={{\n                marginTop: \"30px\",\n                fontWeight: \"bold\",\n                fontSize: \"20px\",\n                color: \"hotpink\",\n              }}\n            >\n              상대방은 &nbsp;\n            </div>\n            <div style={{ textAlign: \"center\" }}>\n              <Radio.Group\n                onChange={(e) =>\n                  setUserInfo((prev) => ({\n                    ...prev,\n                    want_match: e.target.value,\n                  }))\n                }\n                buttonStyle=\"solid\"\n                style={{ margin: \"10px 0 10px 0\", borderRadius: \"12px\" }}\n                size=\"large\"\n              >\n                <Radio.Button style={Radio_Button} value=\"M\">\n                  <ManOutlined />\n                  &nbsp;남자\n                </Radio.Button>\n                <Radio.Button style={Radio_Button} value=\"F\">\n                  <WomanOutlined />\n                  &nbsp;여자\n                </Radio.Button>\n                <Radio.Button style={Radio_Button} value=\"A\">\n                  <TeamOutlined />\n                  &nbsp;아무나\n                </Radio.Button>\n              </Radio.Group>\n            </div>\n            <div style={{ textAlign: \"right\", marginBottom: \"30px\" }}>\n              가 좋겠어요.\n            </div>\n            <hr style={h1} />\n            <div\n              style={{\n                textAlign: \"center\",\n                marginTop: \"30px\",\n              }}\n            >\n              <Button\n                style={{\n                  borderRadius: \"8px\",\n                  boxShadow: \"0 2px 4px 0 gray\",\n                }}\n                block\n                type=\"primary\"\n                loading={loading}\n                disabled={!userInfo.gender || !userInfo.want_match}\n                size=\"large\"\n                onClick={userSubmit}\n              >\n                저장\n              </Button>\n            </div>\n          </div>\n        </Drawer>\n      </>\n    </div>\n  );\n}\n\nconst h1 = { borderTop: \"1px solid #eaeaea\" };\n\nconst Radio_Button = {\n  borderRadius: \"8px\",\n  border: \"2px solid #43d5d2\",\n  margin: \"3px 3px 0 3px\",\n  boxShadow: \"0 2px 3px 0 gray\",\n  //   color: \"dimgray\",\n};\n","import React from \"react\";\nimport { Timeline, Divider, Typography } from \"antd\";\nimport {\n  GithubOutlined,\n  UserOutlined,\n  MailOutlined,\n  InfoCircleOutlined,\n  ProjectOutlined,\n} from \"@ant-design/icons\";\nimport \"./footer.scss\";\n\nexport const Footer = () => {\n  const { Link } = Typography;\n  return (\n    <div className=\"footer-contents\">\n      <div className=\"footer-content\">\n        <Divider>\n          <ProjectOutlined />\n          &nbsp;Project\n        </Divider>\n        <Timeline>\n          <Timeline.Item\n            dot={\n              <GithubOutlined\n                className=\"timeline-clock-icon\"\n                style={{ color: \"dimgray\" }}\n              />\n            }\n          >\n            <Link href=\"https://github.com/dokeey/flexchat\">\n              https://github.com/dokeey/flexchat\n            </Link>\n          </Timeline.Item>\n          <Timeline.Item\n            dot={<InfoCircleOutlined className=\"timeline-clock-icon\" />}\n            color=\"dimgray\"\n          >\n            친구 못 사귀어도 책임 안짐\n          </Timeline.Item>\n        </Timeline>\n      </div>\n      <div className=\"footer-content\">\n        <Divider>\n          <UserOutlined />\n          &nbsp;개발자1\n        </Divider>\n        <Timeline>\n          <Timeline.Item\n            dot={\n              <MailOutlined\n                className=\"timeline-clock-icon\"\n                style={{ color: \"skyblue\" }}\n              />\n            }\n          >\n            <Link href=\"mailto:ehdngv@naver.com\">ehdngv@naver.com</Link>\n          </Timeline.Item>\n          <Timeline.Item\n            dot={\n              <GithubOutlined\n                className=\"timeline-clock-icon\"\n                style={{ color: \"dimgray\" }}\n              />\n            }\n          >\n            <Link href=\"https://github.com/Dokeey/\">\n              https://github.com/Dokeey\n            </Link>\n          </Timeline.Item>\n          <Timeline.Item\n            dot={<InfoCircleOutlined className=\"timeline-clock-icon\" />}\n            color=\"dimgray\"\n          >\n            삼겹살을 좋아함\n          </Timeline.Item>\n        </Timeline>\n      </div>\n\n      <div className=\"footer-content\">\n        <Divider>\n          <UserOutlined />\n          &nbsp;개발자2\n        </Divider>\n        <Timeline>\n          <Timeline.Item\n            dot={\n              <MailOutlined\n                className=\"timeline-clock-icon\"\n                style={{ color: \"skyblue\" }}\n              />\n            }\n          >\n            <Link href=\"mailto:thflthdi@naver.com\">thflthdi@naver.com</Link>\n          </Timeline.Item>\n          <Timeline.Item\n            dot={\n              <GithubOutlined\n                className=\"timeline-clock-icon\"\n                style={{ color: \"dimgray\" }}\n              />\n            }\n          >\n            <Link href=\"https://github.com/thflthdi/\">\n              https://github.com/thflthdi\n            </Link>\n          </Timeline.Item>\n          <Timeline.Item\n            dot={<InfoCircleOutlined className=\"timeline-clock-icon\" />}\n            color=\"dimgray\"\n          >\n            강아지를 키움\n          </Timeline.Item>\n        </Timeline>\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { notification } from \"antd\";\nimport { SmileOutlined } from \"@ant-design/icons\";\nimport { Chat } from \"components/chat\";\nimport { UserCount } from \"components/userCount\";\nimport { AppLayout } from \"components/appLayout\";\nimport { useAppContext } from \"store\";\nimport { ChatStop } from \"components/chatStop\";\nimport { UserInfo } from \"components/userInfo\";\nimport { Footer } from \"components/footer\";\nimport { SOCKET_HOST } from \"Constants\";\n\nfunction Home() {\n  const {\n    store: { jwtToken, group, waiterSocket },\n  } = useAppContext();\n\n  const [chatSocket, setChatSocket] = useState({});\n\n  useEffect(() => {\n    if (jwtToken && group) {\n      const ws = new WebSocket(SOCKET_HOST + `/ws/chat/?token=${jwtToken}`);\n      setChatSocket(ws);\n      if (waiterSocket) {\n        waiterSocket.close();\n      }\n\n      notification.open({\n        message: \"상대방과 연결되었습니다.\",\n        description: \"인사를 건네보세요 :)\",\n        icon: <SmileOutlined style={{ color: \"#43d5d2\" }} />,\n      });\n    }\n  }, [jwtToken, group]);\n\n  const right_sidebar = (\n    <>\n      <UserCount />\n      <ChatStop chatSocket={chatSocket} />\n    </>\n  );\n\n  return (\n    <div>\n      <AppLayout\n        right_sidebar={right_sidebar}\n        user_info={<UserInfo />}\n        footer={<Footer />}\n      >\n        <Chat chatSocket={chatSocket} setChatSocket={setChatSocket} />\n      </AppLayout>\n    </div>\n  );\n}\n\nexport default Home;\n","import PropTypes from \"prop-types\";\nimport { useEffect } from \"react\";\nimport useLatest from \"use-latest\";\n\nvar useUnload = function useUnload(handler) {\n  if (handler === void 0) {\n    handler = function handler() {};\n  }\n\n  if (process.env.NODE_ENV !== \"production\" && typeof handler !== \"function\") {\n    throw new TypeError(\n      'Expected \"handler\" to be a function, not ' + typeof handler + \".\"\n    );\n  }\n\n  var handlerRef = useLatest(handler);\n  useEffect(\n    function () {\n      var handleUnload = function handleUnload(event) {\n        var returnValue = handlerRef.current(event); // Chrome requires `returnValue` to be set.\n\n        if (event.defaultPrevented) {\n          event.returnValue = \"\";\n        }\n\n        if (typeof returnValue === \"string\") {\n          event.returnValue = returnValue;\n          return returnValue;\n        }\n      };\n\n      window.addEventListener(\"unload\", handleUnload);\n      return function () {\n        window.removeEventListener(\"unload\", handleUnload);\n      };\n    },\n    [handlerRef]\n  );\n};\n\nvar Unload = function Unload(props) {\n  useUnload(props.onUnload);\n  return props.children;\n};\n\nUnload.defaultProps = {\n  children: null,\n};\nUnload.propTypes = {\n  children: PropTypes.any,\n  onUnload: PropTypes.func.isRequired,\n};\n\nexport { Unload, useUnload };\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from \"./home\";\nimport { useAppContext, deleteToken, deleteGroup } from \"store\";\nimport { API_HOST } from \"Constants\";\nimport { Unload } from \"utils/Unload\";\n\nfunction Root() {\n  const {\n    store: { pk, userSocket, waiterSocket },\n    dispatch,\n  } = useAppContext();\n\n  const userDelete = () => {\n    dispatch(deleteToken());\n    dispatch(deleteGroup());\n    // const HOST = \"http://localhost\";\n    const HOST = API_HOST;\n    if (waiterSocket) {\n      waiterSocket.close();\n    }\n    userSocket.close();\n    try {\n      navigator.sendBeacon(`${HOST}/accounts/delete/${pk}/`);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // useEffect(() => {\n  //   const userDel = () => userDelete();\n  //   window.addEventListener(\"unload\", userDel);\n  //   window.addEventListener(\"beforeunload\", userDel);\n  //   window.addEventListener(\"pagehide\", userDel);\n  //   return () => {\n  //     window.removeEventListener(\"unload\", userDel);\n  //     window.removeEventListener(\"beforeunload\", userDel);\n  //     window.removeEventListener(\"pagehide\", userDel);\n  //   };\n  // });\n\n  return (\n    <Unload onUnload={() => userDelete()}>\n      {/* <Beforeunload onBeforeunload={() => userDelete()}> */}\n      <Route path=\"/\" component={Home} />\n    </Unload>\n  );\n}\n\nexport default Root;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AppProvider } from \"store\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport Root from \"pages\";\nimport \"antd/dist/antd.css\";\nimport \"main.css\";\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <AppProvider>\n      <Root />\n    </AppProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}